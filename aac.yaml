project:
  name: Archlette Dev Test

ir:
  path: .archlette/ir.json
  publish_copy: true

docs:
  out_dir: docs/architecture

extractors:
  - use: builtin/terraform
    name: tf
    inputs:
      include: ['iac/**']
      exclude: ['**/.terraform/**']

  - use: builtin/code-annotations
    name: code
    inputs:
      include: ['services/**', 'apps/**', 'libs/**', '**/*.{ts,js,py}']
      exclude:
        - '**/node_modules/**'
        - '**/.venv/**'
        - '**/__pycache__/**'
        - '**/dist/**'
        - '**/build/**'
        - '**/*.spec.*'
        - '**/__tests__/**'
      annotations: ['@service', '@component', '@depends_on']

  - use: builtin/openapi
    name: api
    inputs:
      include: ['apis/**/openapi*.{yml,yaml,json}']
      container_hint: 'container:api'

generators:
  - kind: mermaid-c4
    levels: ['C1', 'C2']

tools:
  mermaid:
    enabled: false # disable rendering during test runs
