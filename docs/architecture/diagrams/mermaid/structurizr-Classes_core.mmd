graph TB
  linkStyle default fill:#ffffff

  subgraph diagram ["@chrislyons-dev/archlette - @chrislyons-dev/archlette - Components"]
    style diagram fill:#ffffff,stroke:#ffffff

    subgraph 4 ["@chrislyons-dev/archlette"]
      style 4 fill:#ffffff,stroke:#9a9a9a,color:#9a9a9a

      27["<div style='font-weight: bold'>constants.ts::nametoid</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Convert a name to a<br />normalized ID Used for<br />consistent ID generation<br />across extractors and mappers</div>"]
      style 27 fill:#dddddd,stroke:#9a9a9a,color:#000000
      28["<div style='font-weight: bold'>logger.ts::formattimestamp</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Format timestamp as ISO 8601<br />(local time)</div>"]
      style 28 fill:#dddddd,stroke:#9a9a9a,color:#000000
      29["<div style='font-weight: bold'>logger.ts::formatlogmessage</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Format log message with<br />timestamp, level, and context</div>"]
      style 29 fill:#dddddd,stroke:#9a9a9a,color:#000000
      30["<div style='font-weight: bold'>logger.ts::createlogger</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Create a logger instance</div>"]
      style 30 fill:#dddddd,stroke:#9a9a9a,color:#000000
      31["<div style='font-weight: bold'>module-loader.ts::loadmodulefrompath</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Dynamically load an ESM<br />module from a path or module<br />specifier</div>"]
      style 31 fill:#dddddd,stroke:#9a9a9a,color:#000000
      32["<div style='font-weight: bold'>path-resolver.ts::getclidir</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>"]
      style 32 fill:#dddddd,stroke:#9a9a9a,color:#000000
      33["<div style='font-weight: bold'>path-resolver.ts::expandtilde</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>"]
      style 33 fill:#dddddd,stroke:#9a9a9a,color:#000000
      34["<div style='font-weight: bold'>path-resolver.ts::resolvearchlettepath</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Core path resolver honoring<br />Archlette rules (no file<br />existence checks). - "~" -><br />user home - "/" -> absolute -<br />else -> relative to CLI dir</div>"]
      style 34 fill:#dddddd,stroke:#9a9a9a,color:#000000
      35["<div style='font-weight: bold'>path-resolver.ts::resolvemoduleentry</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Resolve a module entry by<br />probing: 1) Exact path 2)<br />With extensions: .ts then .js<br />3) If directory: index.ts<br />then index.js</div>"]
      style 35 fill:#dddddd,stroke:#9a9a9a,color:#000000
      36["<div style='font-weight: bold'>path-resolver.ts::tofileurl</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>"]
      style 36 fill:#dddddd,stroke:#9a9a9a,color:#000000
      37["<div style='font-weight: bold'>path-resolver.ts::writefile</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Write content to a file,<br />creating parent directories<br />if needed.</div>"]
      style 37 fill:#dddddd,stroke:#9a9a9a,color:#000000
      38["<div style='font-weight: bold'>stage-module-loader.ts::loadextractormodule</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>"]
      style 38 fill:#dddddd,stroke:#9a9a9a,color:#000000
      39["<div style='font-weight: bold'>stage-module-loader.ts::loadvalidatormodule</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>"]
      style 39 fill:#dddddd,stroke:#9a9a9a,color:#000000
      40["<div style='font-weight: bold'>stage-module-loader.ts::loadgeneratormodule</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>"]
      style 40 fill:#dddddd,stroke:#9a9a9a,color:#000000
      41["<div style='font-weight: bold'>stage-module-loader.ts::loadrenderermodule</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>"]
      style 41 fill:#dddddd,stroke:#9a9a9a,color:#000000
      42["<div style='font-weight: bold'>tool-manager.ts::getcachedir</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Get the Archlette cache<br />directory</div>"]
      style 42 fill:#dddddd,stroke:#9a9a9a,color:#000000
      43["<div style='font-weight: bold'>tool-manager.ts::ensurecachedir</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Ensure cache directory exists</div>"]
      style 43 fill:#dddddd,stroke:#9a9a9a,color:#000000
      44["<div style='font-weight: bold'>tool-manager.ts::commandexistsinpath</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Check if a command exists in<br />PATH</div>"]
      style 44 fill:#dddddd,stroke:#9a9a9a,color:#000000
      45["<div style='font-weight: bold'>tool-manager.ts::downloadfile</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Download a file from URL to<br />destination</div>"]
      style 45 fill:#dddddd,stroke:#9a9a9a,color:#000000
      46["<div style='font-weight: bold'>tool-manager.ts::extractzip</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Extract a ZIP file (simple<br />extraction for Structurizr<br />CLI)</div>"]
      style 46 fill:#dddddd,stroke:#9a9a9a,color:#000000
      47["<div style='font-weight: bold'>tool-manager.ts::makeexecutable</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Make file executable (Unix<br />only)</div>"]
      style 47 fill:#dddddd,stroke:#9a9a9a,color:#000000
      48["<div style='font-weight: bold'>tool-manager.ts::downloadstructurizr</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Download and install<br />Structurizr CLI to cache</div>"]
      style 48 fill:#dddddd,stroke:#9a9a9a,color:#000000
      49["<div style='font-weight: bold'>tool-manager.ts::downloadplantuml</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Download and install PlantUML<br />to cache</div>"]
      style 49 fill:#dddddd,stroke:#9a9a9a,color:#000000
      50["<div style='font-weight: bold'>tool-manager.ts::findstructurizrcli</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Find or download Structurizr<br />CLI</div>"]
      style 50 fill:#dddddd,stroke:#9a9a9a,color:#000000
      51["<div style='font-weight: bold'>tool-manager.ts::findplantuml</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Find or download PlantUML JAR</div>"]
      style 51 fill:#dddddd,stroke:#9a9a9a,color:#000000
      52["<div style='font-weight: bold'>tool-manager.ts::checkjava</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Verify Java is available</div>"]
      style 52 fill:#dddddd,stroke:#9a9a9a,color:#000000
      53["<div style='font-weight: bold'>tool-manager.ts::requirejava</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Validate Java is installed<br />(throw if not)</div>"]
      style 53 fill:#dddddd,stroke:#9a9a9a,color:#000000
      54["<div style='font-weight: bold'>types-aac.ts::resolveconfig</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>For each stage, resolve<br />includes/excludes for each<br />node: - If node omits<br />includes/excludes, inherit<br />from defaults.</div>"]
      style 54 fill:#dddddd,stroke:#9a9a9a,color:#000000
    end

  end