@startuml
set separator none
title Application - Application - Components

top to bottom direction
skinparam ranksep 60
skinparam nodesep 30

skinparam {
  arrowFontSize 10
  defaultTextAlignment center
  wrapWidth 200
  maxMessageSize 100
  defaultFontName "Arial"
}

hide stereotype

skinparam rectangle<<Application.Application.default_container__basic_wrangler__basicwranglerextractor>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__derivecontainertype>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__extractcontainerrelationships>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__extractcontainers>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__extractdeploymentrelationships>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__extractdeploymentsandinstances>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__extractdescription>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__findwranglerfiles>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__getenvironmentconfig>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__getenvironments>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__maptoir>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__normalizeservicebindings>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application.default_container__basic_wrangler__parsewranglerfile>> {
  BackgroundColor #85bbf0
  FontColor #000000
  BorderColor #5d82a8
  roundCorner 20
  shadowing false
}
skinparam rectangle<<Application.Application>> {
  BorderColor #2e6295
  FontColor #2e6295
  shadowing false
}

rectangle "Application\n<size:10>[Container: Application]</size>" <<Application.Application>> {
  rectangle "==default_container__basic_wrangler__findwranglerfiles\n<size:10>[Component: function]</size>\n\nFind wrangler.toml files based on include/exclude patterns" <<Application.Application.default_container__basic_wrangler__findwranglerfiles>> as Application.Application.default_container__basic_wrangler__findwranglerfiles
  rectangle "==default_container__basic_wrangler__maptoir\n<size:10>[Component: function]</size>\n\nMap wrangler configurations to ArchletteIR This creates: - Containers: One per wrangler.toml file - Deployments: One per environment (production, dev, preview, etc.) - Container Instances: One per container per environment - Container Relationships: Logical dependencies from service bindings - Deployment Relationships: Physical instance-to-instance connections" <<Application.Application.default_container__basic_wrangler__maptoir>> as Application.Application.default_container__basic_wrangler__maptoir
  rectangle "==default_container__basic_wrangler__extractcontainers\n<size:10>[Component: function]</size>\n\nExtract containers from wrangler configurations Creates one container per wrangler.toml file. Each container represents a Cloudflare Worker (if main exists) or other Cloudflare service." <<Application.Application.default_container__basic_wrangler__extractcontainers>> as Application.Application.default_container__basic_wrangler__extractcontainers
  rectangle "==default_container__basic_wrangler__derivecontainertype\n<size:10>[Component: function]</size>\n\nDerive container type from wrangler configuration Logic: - If 'main' field exists → Cloudflare Worker - Otherwise → Cloudflare Service (generic)" <<Application.Application.default_container__basic_wrangler__derivecontainertype>> as Application.Application.default_container__basic_wrangler__derivecontainertype
  rectangle "==default_container__basic_wrangler__extractdeploymentsandinstances\n<size:10>[Component: function]</size>\n\nExtract deployments and container instances Creates: - One deployment per environment - Container instances for each container in each environment" <<Application.Application.default_container__basic_wrangler__extractdeploymentsandinstances>> as Application.Application.default_container__basic_wrangler__extractdeploymentsandinstances
  rectangle "==default_container__basic_wrangler__extractcontainerrelationships\n<size:10>[Component: function]</size>\n\nExtract container relationships from service bindings Creates logical dependencies between containers based on service bindings. Deduplicates relationships across all environments." <<Application.Application.default_container__basic_wrangler__extractcontainerrelationships>> as Application.Application.default_container__basic_wrangler__extractcontainerrelationships
  rectangle "==default_container__basic_wrangler__extractdeploymentrelationships\n<size:10>[Component: function]</size>\n\nExtract deployment relationships from container instances Creates physical instance-to-instance relationships based on service bindings. Each relationship represents an actual runtime dependency in a specific environment." <<Application.Application.default_container__basic_wrangler__extractdeploymentrelationships>> as Application.Application.default_container__basic_wrangler__extractdeploymentrelationships
  rectangle "==default_container__basic_wrangler__extractdescription\n<size:10>[Component: function]</size>\n\nExtract description from" <<Application.Application.default_container__basic_wrangler__extractdescription>> as Application.Application.default_container__basic_wrangler__extractdescription
  rectangle "==default_container__basic_wrangler__parsewranglerfile\n<size:10>[Component: function]</size>\n\nParse a wrangler.toml file" <<Application.Application.default_container__basic_wrangler__parsewranglerfile>> as Application.Application.default_container__basic_wrangler__parsewranglerfile
  rectangle "==default_container__basic_wrangler__normalizeservicebindings\n<size:10>[Component: function]</size>\n\nNormalize service bindings from various formats Wrangler supports multiple binding formats: - [[services]] array (TOML array of tables) - services = [{ binding = "...", service = "..." }]" <<Application.Application.default_container__basic_wrangler__normalizeservicebindings>> as Application.Application.default_container__basic_wrangler__normalizeservicebindings
  rectangle "==default_container__basic_wrangler__getenvironments\n<size:10>[Component: function]</size>\n\nGet all environments from a wrangler config Returns a list of environment names, including: - "production" (from root-level config if it has deployable content) - All keys from env.* sections" <<Application.Application.default_container__basic_wrangler__getenvironments>> as Application.Application.default_container__basic_wrangler__getenvironments
  rectangle "==default_container__basic_wrangler__getenvironmentconfig\n<size:10>[Component: function]</size>\n\nGet configuration for a specific environment Merges root-level config with environment-specific overrides. Environment config takes precedence." <<Application.Application.default_container__basic_wrangler__getenvironmentconfig>> as Application.Application.default_container__basic_wrangler__getenvironmentconfig
  rectangle "==default_container__basic_wrangler__basicwranglerextractor\n<size:10>[Component: function]</size>\n\nExtract deployment topology from Cloudflare Wrangler configuration files" <<Application.Application.default_container__basic_wrangler__basicwranglerextractor>> as Application.Application.default_container__basic_wrangler__basicwranglerextractor
}

@enduml