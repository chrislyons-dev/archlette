graph TB
  linkStyle default fill:#ffffff

  subgraph diagram ["Application - Application - Components"]
    style diagram fill:#ffffff,stroke:#ffffff

    subgraph 8 ["Application"]
      style 8 fill:#ffffff,stroke:#2e6295,color:#2e6295

      34("<div style='font-weight: bold'>core__nametoid</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Convert a name to a<br />normalized ID Used for<br />consistent ID generation<br />across extractors and mappers</div>")
      style 34 fill:#85bbf0,stroke:#5d82a8,color:#000000
      35("<div style='font-weight: bold'>core__istty</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Determine if we're in a TTY<br />environment (for pretty<br />printing)</div>")
      style 35 fill:#85bbf0,stroke:#5d82a8,color:#000000
      36("<div style='font-weight: bold'>core__getdefaultloglevel</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Get default log level from<br />environment or fallback to<br />'info'</div>")
      style 36 fill:#85bbf0,stroke:#5d82a8,color:#000000
      37("<div style='font-weight: bold'>core__createpinologger</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Create a Pino logger instance<br />with optional pretty printing</div>")
      style 37 fill:#85bbf0,stroke:#5d82a8,color:#000000
      38("<div style='font-weight: bold'>core__createlogger</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Create a logger instance</div>")
      style 38 fill:#85bbf0,stroke:#5d82a8,color:#000000
      39("<div style='font-weight: bold'>core__loadmodulefrompath</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Dynamically load an ESM<br />module from a path or module<br />specifier</div>")
      style 39 fill:#85bbf0,stroke:#5d82a8,color:#000000
      40("<div style='font-weight: bold'>core__getclidir</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>")
      style 40 fill:#85bbf0,stroke:#5d82a8,color:#000000
      41("<div style='font-weight: bold'>core__expandtilde</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>")
      style 41 fill:#85bbf0,stroke:#5d82a8,color:#000000
      42("<div style='font-weight: bold'>core__resolvearchlettepath</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Core path resolver honoring<br />Archlette rules (no file<br />existence checks). - "~" -><br />user home - "/" -> absolute -<br />else -> relative to CLI dir</div>")
      style 42 fill:#85bbf0,stroke:#5d82a8,color:#000000
      43("<div style='font-weight: bold'>core__resolvemoduleentry</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Resolve a module entry by<br />probing: 1) Exact path 2)<br />With extensions: .ts then .js<br />3) If directory: index.ts<br />then index.js</div>")
      style 43 fill:#85bbf0,stroke:#5d82a8,color:#000000
      44("<div style='font-weight: bold'>core__tofileurl</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>")
      style 44 fill:#85bbf0,stroke:#5d82a8,color:#000000
      45("<div style='font-weight: bold'>core__writefile</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Write content to a file,<br />creating parent directories<br />if needed.</div>")
      style 45 fill:#85bbf0,stroke:#5d82a8,color:#000000
      46("<div style='font-weight: bold'>core__loadextractormodule</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>")
      style 46 fill:#85bbf0,stroke:#5d82a8,color:#000000
      47("<div style='font-weight: bold'>core__loadvalidatormodule</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>")
      style 47 fill:#85bbf0,stroke:#5d82a8,color:#000000
      48("<div style='font-weight: bold'>core__loadgeneratormodule</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>")
      style 48 fill:#85bbf0,stroke:#5d82a8,color:#000000
      49("<div style='font-weight: bold'>core__loadrenderermodule</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>")
      style 49 fill:#85bbf0,stroke:#5d82a8,color:#000000
      50("<div style='font-weight: bold'>core__loaddocmodule</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div>")
      style 50 fill:#85bbf0,stroke:#5d82a8,color:#000000
      51("<div style='font-weight: bold'>core__getcachedir</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Get the Archlette cache<br />directory</div>")
      style 51 fill:#85bbf0,stroke:#5d82a8,color:#000000
      52("<div style='font-weight: bold'>core__ensurecachedir</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Ensure cache directory exists</div>")
      style 52 fill:#85bbf0,stroke:#5d82a8,color:#000000
      53("<div style='font-weight: bold'>core__commandexistsinpath</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Check if a command exists in<br />PATH</div>")
      style 53 fill:#85bbf0,stroke:#5d82a8,color:#000000
      54("<div style='font-weight: bold'>core__downloadfile</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Download a file from URL to<br />destination</div>")
      style 54 fill:#85bbf0,stroke:#5d82a8,color:#000000
      55("<div style='font-weight: bold'>core__extractzip</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Extract a ZIP file (simple<br />extraction for Structurizr<br />CLI)</div>")
      style 55 fill:#85bbf0,stroke:#5d82a8,color:#000000
      56("<div style='font-weight: bold'>core__makeexecutable</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Make file executable (Unix<br />only)</div>")
      style 56 fill:#85bbf0,stroke:#5d82a8,color:#000000
      57("<div style='font-weight: bold'>core__downloadstructurizr</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Download and install<br />Structurizr CLI to cache</div>")
      style 57 fill:#85bbf0,stroke:#5d82a8,color:#000000
      58("<div style='font-weight: bold'>core__downloadplantuml</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Download and install PlantUML<br />to cache</div>")
      style 58 fill:#85bbf0,stroke:#5d82a8,color:#000000
      59("<div style='font-weight: bold'>core__findstructurizrcli</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Find or download Structurizr<br />CLI</div>")
      style 59 fill:#85bbf0,stroke:#5d82a8,color:#000000
      60("<div style='font-weight: bold'>core__findplantuml</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Find or download PlantUML JAR</div>")
      style 60 fill:#85bbf0,stroke:#5d82a8,color:#000000
      61("<div style='font-weight: bold'>core__checkjava</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Verify Java is available</div>")
      style 61 fill:#85bbf0,stroke:#5d82a8,color:#000000
      62("<div style='font-weight: bold'>core__requirejava</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>Validate Java is installed<br />(throw if not)</div>")
      style 62 fill:#85bbf0,stroke:#5d82a8,color:#000000
      63("<div style='font-weight: bold'>core__resolveconfig</div><div style='font-size: 70%; margin-top: 0px'>[Component: function]</div><div style='font-size: 80%; margin-top:10px'>For each stage, resolve<br />includes/excludes for each<br />node: - If node omits<br />includes/excludes, inherit<br />from defaults.</div>")
      style 63 fill:#85bbf0,stroke:#5d82a8,color:#000000
    end

  end